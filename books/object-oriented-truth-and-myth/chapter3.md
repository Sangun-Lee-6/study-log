# Ch 3. 타입과 추상화

## 📌 지하철 노선도 추상화

✅ 초기 지하철 노선도의 문제

- 초기의 지하철 노선도는 사실적인 정보(ex. 거리, 지형) 때문에 `역과 역의 연결성`이라는 정보를 이해하기 어려웠음
- 승객은 역과 역 사이를 이동하는게 목적임

✅ 현대 지하철 노선도

- 현대 지하철 노선도는 지도의 정확성을 버리고 목적에 집중
- 승객이 꼭 알아야하는 사실만 표현하고 몰라도 되는 정보는 무시
- ⇒ 이해하기 쉽고 단순하며 목적에 부합하는 지하철 노선도 개발

# 1. 추상화를 통한 복잡성 극복

✅ 인간이 추상화를 하는 이유

- 복잡한 현실을 이해하기엔 인간의 인지 능력과 저장 공간이 부족
- ∴ 인간은 현실을 분해하고 단순화해서 이해함

✅ 추상화의 목적 : 현실에서 불필요한 부분은 무시 → 복잡성 해결 → 사물의 본질이 드러남

✅ 좋은 추상화는 목적에 부합해야함

- 지하철 노선도의 추상화는 승객이 지하철을 보는 모델과 일치해서 유용했음
- 지상의 도로로 지하철역을 찾으려는 승객에게는 유용하지 않음

✅ 이 책에서 정의하는 추상화

> 추상화 : 어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법.
>
>
> 복잡성을 다루기 위해 추상화는 두 차원에서 이뤄진다.
>
> 첫 번째 차원은 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것이다.
>
> 두 번째 차원은 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거함으로써 단순하게 만드는 것이다.
>
> 모든 경우에 추상화의 목적은 복잡성을 이해하기 쉬운 수준으로 단순화하는 것이라는 점을 기억하라.
>

✅ 객체지향은 객체라는 추상화를 통해 현실의 복잡성을 극복

# 2. 객체지향과 추상화

## 📌 모두 트럼프일 뿐

📖 앨리스와 하트 여왕이 마주치는 장면

- 수많은 객체들(정원사, 병사, 신하, 토끼, 여왕 등)이 있음
- 각 객체는 독특한 모습을 하고 있지만, 앨리스는 토끼를 제외한 모든 객체를 트럼프로 단순화함

✅ 각 객체의 차이점은 무시하고 `트럼프`라는 공통점으로 단순화해서 추상화한 것

## 📌 그룹으로 나누어 단순화하기

✅ 객체지향에서 객체

- 명확한 경계를 가지고 서로 구별할 수 있는 구체적인 사람이나 사물
- 앨리스 이야기에서 각 객체는 서로를 구별할 수 있는 특징이 있음

✅ 다양한 객체를 트럼프로 부를 수 있는 이유

- 각 객체들의 차이점을 무시하고 공통점에 집중했으므로

✅ 트럼프 의미에 적합하지 않은 객체는 트럼프 그룹에서 제외했음

- ex. 토끼

✅ 트럼프 그룹과 토끼 그룹으로 나누어 단순화해서 → 여러 객체에 대한 복잡성 ↓

## 📌 개념

✅ 인간의 인지 능력 한계

- 인간이 각 객체를 개별 단위로 파악하기엔 인지 능력이 부족함
- ∴ 공통 특성을 기준으로 객체를 그룹으로 나누어 → 동시에 다뤄야하는 가짓수를 줄여서 단순화하려고 함
- 앨리스는 여러 객체를 트럼프라는 개념(concept)으로 추상화함

✅ 개념과 분류

- 개념을 이용하면 객체를 그룹으로 분류(classification) 가능
- 개념은 공통점을 기반으로 객체를 분류할 수 있는 기준

✅ 각 객체는 특정 개념을 적용할 수 있는 구체적인 사물

✅ 개념의 인스턴스(instance)

- 개념을 적용할 수 있어서 그룹의 요소가 될 수 있는 객체

## 📌 개념의 세 가지 관점

✅ 개념은 특정 객체가 어떤 그룹에 속할 것인지 결정하는 기준

✅ 개념의 3가지 구성 요소

1. 심볼(symbol) : 개념을 가리키는 간략한 이름이나 명칭

2. 내연(intension) : 개념의 완전하 정의, 내연의 의미를 이용해 객체가 개념에 속하는지 판단 가능

3. 외연(extension) : 개념에 속하는 모든 객체의 집합(set)

📖 앨리스 이야기에서 개념의 구성 요소

- 심볼 : 트럼프
- 내연 : 몸이 납작하고 손발이 몸 모서리에 달려있음
- 외연 : 정원사, 병사, 신하, 왕비 등 객체들

👉 내연

- 트럼프에 대한 설명 → 내연이 개념 적용의 기준이 됨
- 토끼는 트럼프 내연을 만족시키지 못해 트럼프가 될 수 없음

## 📌 객체를 분류하기 위한 틀

✅ 객체 분류 = 객체에 특정 개념을 적용하는 것

✅ 적절한 분류는 객체지향의 품질 ↑

- 어떤 객체를 어떤 개념으로 분류할지가 객체지향의 품질을 결정
- 객체를 적절한 개념에 따라 분류한 앱은 유지보수성과 유연성이 높고, 개발자가 객체를 쉽게 찾고 조작할 수 있음

## 📌 분류는 추상화를 위한 도구다

✅ 추상화의 차원

1. 사물 간 공통점은 취하고 차이점은 버리는 일반화를 통한 단순화

2. 불필요한 세부 사항을 제거해 단순화해서 중요한 부분 강조

✅ 개념을 통한 객체 분류 과정은 추상화의 두 차원을 모두 사용함

- 트럼프라는 개념으로 묶은 것 ⇒ 일반화
- 트럼프의 개념 외의 다른 트럼프의 특징은 무시 ⇒ 불필요한 것 제거

✅ 개념은 객체의 복잡성을 극복하기 위한 추상화 도구

- 추상화를 통해 복잡한 세상을 제어 가능한 수준으로 단순화할 수 있는 것

# 3. 타입

## 📌 타입은 개념이다

✅ 컴퓨터 공학에서 개념 == 타입(type)

- 타입은 공통점으로 객체를 묶기 위한 틀
- 타입은 심볼, 내연, 외연으로 서술 가능함
- 타입에 속하는 객체를 인스턴스라고 함

## 📌 데이터 타입

✅ 타입 시스템의 필요성

- 메모리의 데이터는 0과 1의 집합 → 이 비트열만 보면 어떤 의미인지 알 수 없음
- ∴  사람들은 데이터의 용도와 행동에 따라 분류했음 → 타입 시스템(type system)

✅ 타입 시스템의 목적 : 데이터가 잘못 사용되지 않도록 제약사항을 부과하는 것

- 타입에 따라 가능한 작업, 불가능한 작업을 구분할 수 있으므로

✅ 타입에 관한 2가지 사실

1. 타입은 데이터가 어떻게 사용되느냐에 관한 것

2. 타입에 속한 데이터가 메모리에 표현되는 것은 감춰짐

1️⃣ 타입은 데이터가 어떻게 사용되느냐에 관한 것

- 데이터가 어떤 타입에 속하는지 결정할 수 있는 것은 데이터에 적용 가능한 작업
- 연산자(operator) : 데이터를 이용해 수행할 수 있는 작업
- 데이터에 어떤 연산자를 적용할 수 있는지가 그 데이터의 타입을 결정함

2️⃣ 타입에서 데이터의 비트열은 감춰짐

- 데이터의 비트열을 몰라도 타입을 사용하기 위해 연산자만 알면 됨
- 메모리 내부에 숫자 저장 방식을 몰라도 숫자형 데이터 사용 가능

✅ 데이터 타입의 정의

- 데이터 타입은 메모리에 있는 데이터 집합에 관한 분류 메타데이터
- 데이터에 대한 분류는 데이터가 어떤 연산이 가능한지 결정

## 📌 객체와 타입

✅ 객체와 타입

- 데이터 타입과 같이 객체도 타입에 따라 분류 가능

✅ 데이터 타입과 객체 타입의 차이점

- 객체에서 중요한 것은 데이터가 아니라 행동
- ∴ 객체지향 설계의 핵심은 객체가 협력을 위해 어떤 책임을 지녀야하는지 결정하는 것

✅ 데이터 타입에 관한 2가지 사실은 객체 타입에도 적용됨

1. 객체가 어떤 타입에 속하는지 결정하는 것은 객체가 수행하는 행동

2. 객체 내부적인 표현은 외부로부터 감춰짐

## 📌 행동이 우선이다

✅ 객체를 타입으로 분류할 때 기준 → 동일한 행동인지

- 어떤 데이터를 갖고 있어도 상관 없음

1️⃣ 객체가 어떤 타입에 속하는지 결정하는 것은 객체가 수행하는 행동

- 같은 타입에 속한 객체는 행동만 동일하면 서로 다른 데이터를 가질 수 있음
- 동일한 타입 = 동일한 책임 = 동일한 메세지 수신
- ∴ 같은 타입의 객체는 내부 데이터가 달라도 같은 메세지를 수신하고 처리 가능

👉 다형성

- 내부 표현 방식이 다르므로 메세지를 처리하는 방식은 다름 → 다형성
- 다형성은 동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력

2️⃣ 객체 내부적인 표현은 외부로부터 감춰짐

- 캡슐화 : 외부에 행동만 제공하고 데이터는 행동 뒤로 감추는 것
- 행동에 따라 객체를 분류하려면 객체가 내부 데이터가 아니라 외부에 제공하는 행동을 먼저 생각해야함

# 4. 타입의 계층

## 📌 트럼프 계층

📖 앨리스 이야기 :

- 정원사, 병사, 왕비 등의 겉모습은 `트럼프 카드`와 유사하지만 행동 자체는 `트럼프 카드`와 동일하지 않음
- 객체에서 같은 타입이 되려면 같은 행동을 해야함
- 앨리스 이야기의 트럼프는 트럼프 카드의 행동 + 걸어다닐 수 있는 행동까지 추가됨
- ∴ 따라서 `트럼프 타입`보다는 `트럼프 인간 타입`이 조금 더 정확한 타입임

✅ 외연 관점에서 트럼프와 트럼프 인간

- 트럼프 인간은 트럼프의 부분 집합

✅ 일반화/특수화 관계

- 트럼프 : 트럼프 인간보다 일반적인 개념
- 트럼프 인간 : 트럼프 보다 특수한 개념

## 📌 일반화/특수화 관계

✅ 일반화와 특수화는 동시에 일어남

✅ 객체지향에서 일반화/특수화 관계를 결정하는 것은 데이터가 아니라 행동

- 특수한 타입의 행동 = 일반적인 타입의 행동 + ⍺
- ex. 트럼프 인간 타입은 트럼프 타입의 행동보다 인간 같은 특수한 행동을 더 할 수 있어서 특수한 타입

✅ 행동의 가짓수(내연)와 집합의 크기(외연)는 반대

- 행동의 가짓수 : 일반 타입 < 특수 타입
- 집합의 크기 : 일반 타입 > 특수 타입

## 📌 슈퍼 타입과 서브 타입

✅ 타입에서 일반화/특수화 관계에 대한 용어

- 일반 타입 ⇒ 슈퍼 타입(Super type)
- 특수 타입 ⇒ 서브 타입(Sub type)

✅ 서브 타입과 슈퍼 타입의 관계

- 서브 타입은 슈퍼 타입을 대체할 수 있음
- 서브 타입의 행동 = 슈퍼 타입의 행동 + ⍺

✅ 일반화/특수화 관계 표기 방법

- 슈퍼 타입이 상단, 서브 타입이 하단에 위치
- 속이 빈 화살표로 연결
- 이때 서브 타입은 슈퍼 타입과 중복된 행동은 생략 가능
- 슈퍼 타입의 행동은 서브 타입에게 자동 상속됨

## 📌 일반화는 추상화를 위한 도구다

✅ 일반화/특수화는 추상화의 두 번째 차원의 예시

- 중요 부분을 강조하기 위해 불필요한 세부 사항을 제거해서 단순화

📖 앨리스 이야기 : “트럼프일 뿐”

- 앨리스는 트럼프 인간 타입의 객체들을 좀 더 단순하게 보기 위해 트럼프로 일반화한 것

# 5. 정적 모델

## 📌 타입의 목적

✅ 타입을 사용하는 이유

- 동적으로 변하는 객체의 복잡성 때문에
- 객체의 복잡성은 객체의 상태(데이터)가 변하기 때문
- 타입을 사용하면 객체를 정적인 모습(행동)으로 다룰 수 있음 → 복잡성 ↓

📖 앨리스 이야기

- ex. 앨리스의 키가 계속 변해도 같은 앨리스
- 변하는 앨리스의 상태를 다 다루기엔 복잡하므로 앨리스가 할 수 있는 행동만 다루기
- 그러면 복잡성이 감소해서 앨리스를 다루기 쉬워짐

## 📌 그래서 결국 타입은 추상화다

✅ 타입은 추상화

- 불필요한 요소(시간, 상태)를 제거하고 단순화했으므로

✅ 타입은 객체의 동적인 특성(시간에 따른 상태 변경)을 단순화할 수 있음

## 📌 동적 모델과 정적 모델

✅ 객체를 생각할 때 두 가지 모델을 동시에 고려함

1. 동적 모델

2. 정적 모델

1️⃣ 동적 모델

- 객체가 특정 시점에 구체적으로 어떤 상태인가
- `객체의 스냅샷`이라고 함
- 객체의 상태가 어떻게 변하고 행동하는지 파악하는 것

2️⃣ 정적 모델, 타입 모델

- 객체의 상태와 행동을 시간에 독립적으로 표현

✅ 객체지향 앱을 설계하고 구현할 때도 두 가지 모델을 다룸

- ex. 클래스 작성 → 정적 모델
- ex. 객체 상태 추적, 디버깅 → 동적 모델

## 📌 클래스

✅ 타입을 구현하는 일반적인 방법은 클래스를 이용하는 것

- OOP에서 정적 모델은 클래스로 구현됨
- 클래스 ≠ 타입 → 클래스는 타입의 여러 구현 방법 중 하나일 뿐